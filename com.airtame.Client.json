{
  "app-id": "com.airtame.Client",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "19.08",
  "sdk": "org.freedesktop.Sdk",
  "base": "io.atom.electron.BaseApp",
  "base-version": "19.08",
  "command": "airtame",
  "finish-args": [
    "--share=ipc",
    "--socket=x11",
    "--share=network"
  ],
  "modules": [
    {
      "name": "squashfs-tools",
      "make-args": ["XZ_SUPPORT=1"],
      "make-install-args": ["INSTALL_DIR=/app/bin"],
      "no-autogen": true,
      "subdir": "squashfs-tools",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/plougher/squashfs-tools/archive/4.4.tar.gz",
          "sha256": "a7fa4845e9908523c38d4acf92f8a41fdfcd19def41bd5090d7ad767a6dc75c3"
        }
      ]
    },
    {
      "name": "airtame",
      "buildsystem": "simple",
      "build-commands": [
        "install -D apply_extra /app/bin/apply_extra",
        "install -D airtame.sh /app/bin/airtame",
        "install -D com.airtame.Client.appdata.xml /app/share/metainfo/com.airtame.Client.appdata.xml"
      ],
      "sources": [
        {
          "type": "script",
          "dest-filename": "apply_extra",
          "commands": [
            "unsquashfs airtame.snap",
            "rm airtame.snap",
            "mv squashfs-root airtame",
            "install -D airtame/meta/gui/airtame-application.desktop export/share/applications/com.airtame.Client.desktop",
            "sed -e 's:Icon=.*:Icon=com.airtame.Client:' -e 's:Exec=.*:Exec=/app/extra/airtame/airtame-application:' -i export/share/applications/com.airtame.Client.desktop",
            "install -D airtame/meta/gui/icon.png export/share/icons/hicolor/1024x1024/apps/com.airtame.Client.png"
          ]
        },
        {
          "type": "script",
          "dest-filename": "airtame.sh",
          "commands": [
            "exec /app/extra/airtame/airtame-application --no-sandbox \"$@\""
          ]
        },
        {
          "type": "file",
          "path": "com.airtame.Client.appdata.xml"
        },
        {
          "type": "extra-data",
          "filename": "airtame.snap",
          "only-arches": [
            "x86_64"
          ],
          "url": "https://api.snapcraft.io/api/v1/snaps/download/DueSfgqiYVa9th2wjbXaEUwFYqMpROv3_10.snap",
          "sha256": "cf0e3926ac1ef0bc31eab6f02f8e7a8321f0bc0cdaa39c515518420f53721dd8",
          "size": 65101824,
          "x-checker-data": {
            "type": "snapcraft",
            "name": "airtame-application",
            "channel": "stable"
          }
        }
      ]
    }
  ]
}
